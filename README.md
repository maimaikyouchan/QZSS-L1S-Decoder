# QZSS-L1S-Decoder
QZSS(みちびき)の災害危機通報をデコードするだけのPythonプログラム(未完成)です。  
Pythonを入れた環境が必要です。
## 使い方
ミートスパゲッティ.pyをダブルクリックするか、コマンドラインで呼び出すと```Data:```と出るので、   
```$QZQSM,??,~~~~~~~~~~~*??``` をそのまま入力するか ```~~~~~~~~~```内の16進数(災害危機通報)のみを入力すると動作するはずです。   
(これに伴い、末尾の```*??```(チェックサム)は検証していません。)   
### 入力例
```
$QZQSM,57,C6AF8B2C8000DB24000059000548C5E2C000000003DFF8001C000012BA056F0*08
```
```
Data:C6AF8B2C8000DB24000059000548C5E2C000000003DFF8001C000012BA056F0
```
いろいろ見たい場合はソース内上部(約5行目)にある```DebugMode```を```True```(大文字小文字注意)にすると表示できます。   
一部は ```DebugMode``` に関わらずごちゃごちゃと出力されます。(改修漏れ)   
動かない時はご自身で修正してみてください。(ほとんどの場合、値の理解が不十分だった事によるものです)   
今後新たな災害危機通報の内容が追加変更された時に使えるよう、Excelシートで作ったテンプレート作成ツールを入れておきます。   
マクロとかの高度機能は使用しておらず、セルの内容をくっつけているだけなのでLibreOfficeでも使えるはずです試してみてください。   
外部ライブラリであるPySerial機能はすべて抜いています。    
(※そもそも実装がうまくできなかった。)   
## 各種資料から引用した試験用メッセージ
以下は動作確認で使用したメッセージデータの例です。
#### 緊急地震速報(胆振東部地震)
```
9AAC89558B0003240000AB160F3A2499B40000000000002000000010C93712C
```
#### 緊急地震速報(能登地震)
```
53AC8A95CB00032400002B96054661A6C00207A000000000000000100000000
```
#### 火山情報(詳細不明)
```
53AD408400000040001065035B600756200EAF601D65003AD68000100000000
```
#### 津波関連(若干の海面変動あり)
```
C6AD108400000000CA670800000002C8C0010E0000000000000000100000000
```

## 実際にSpresenseで受信したメッセージ(一部省略)
#### 実際に受信した海上気象情報(日本海沿岸)
```
53ADF321140002D00E5A044B4E2169FB2D4005A814B5DEA81FE00012273BC4C
```
#### 実際に受信した海上気象情報(北海道沿岸)
```
C6ADF321140002C3E858898B1F6963F22CC2659860B30E9662200011F1CF5E8
```
#### 実際に受信したMT44の情報(詳細不明)
```
9AB0600DE00000000000000000000000000000000000000000000000D621F6C
```
#### 実際に受信した海上気象情報(四国沿岸で3つ空白)
```
C6ADF31DD400050FAA00000000000000000000000000000000000013F7C4864 
```

### 実際にSpresenseで受信したメッセージ2024.06.11 13:00からの試験(一例)

#### 緊急地震速報
```
$QZQSM,57,C6AF8B2C8000DB24000059000548C5E2C000000003DFF8001C000012BA056F0*08
```
#### 震源情報
```
$QZQSM,57,9AAF932C82800388000059051440C5C82A010830000000000000001125784D0*77
```
#### 震度情報
```
$QZQSM,57,9AAF9B2C828002C82CB25AE775A8D4CA854AB8000000000000000013580AEDC*78
```
#### 南海トラフ地震
```
$QZQSM,57,9AAFA32C918002F2D141F3CAC671C0D3F4C04D72DC5C71C0D406D8132C8E77C*0B
```
#### 津波情報
```
$QZQSM,57,9AAFAB2C828001E8F67C31053960414E621053BE00000000000000139201B28*0A
```


### シリアルで実際に得られるデータ
```
$QZQSM,61,C6ADF31DD40002D0185A710B4FB16BBD503FCA08214106A861300010B517AC4*0E {CRLF}
```
#### is-qzss-dcr-013 (111p)Table 4.3.1-1 Sentence formatより)
```
[Message header ($QZQSM)][Field delimiter(,)][Satellite ID(61)][Field delimiter(,)][DC Report Message(C6ADF～17AC4)][Field delimiter(*)][Checksum(0E)]{CRLF}
```
```
ヘッダー(６文字) 区切り(１文字) 衛星ID(みちびき３号機)(２文字) 災害危機通報内容(６３文字) 区切り(１文字) チェックサム(２文字) {改行コード}
```

## 最後に・・・・
このくだらないソースの一部を使って「俺が作った！やったぜ！」とかされちゃうと約2.5年間保っていたモチベがめっちゃ下がります。   
何も要りませんし金銭とかを要求するつもりは全くありませんが、もし一言感想とかを頂ければまた何かこういうのを作ろうとした時にモチベが保てます。
